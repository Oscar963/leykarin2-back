# ========================================
# CONFIGURACIÓN LIMPIA - (DESARROLLO)
# ========================================
# Solo variables que realmente se usan en el proyecto

# ========================================
# APLICACIÓN
# ========================================
APP_NAME="Leykarin"
APP_ENV=local
APP_KEY=   # <--- Generar con: php artisan key:generate
APP_DEBUG=true
APP_URL=http://localhost

# ========================================
# LOGGING
# ========================================
LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# ========================================
# BASE DE DATOS
# ========================================
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=leykarin2
DB_USERNAME=root
DB_PASSWORD=

DB_CHARSET=utf8mb4
DB_COLLATION=utf8mb4_unicode_ci
DB_TEST_DATABASE=leykarin_test

# ========================================
# DRIVERS DE SISTEMA
# ========================================
BROADCAST_DRIVER=log
CACHE_DRIVER=file
FILESYSTEM_DISK=local
QUEUE_CONNECTION=sync
SESSION_DRIVER=file
SESSION_LIFETIME=120

# ========================================
# REDIS (Opcional - para producción)
# ========================================
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# ========================================
# MAIL (SMTP)
# ========================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=no-reply@municipalidadarica.cl
MAIL_PASSWORD=
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=no-reply@municipalidadarica.cl
MAIL_FROM_NAME="${APP_NAME}"

NOTIFICATION_MAIL_FROM_ADDRESS=noreply@municipalidadarica.cl
NOTIFICATION_MAIL_FROM_NAME="Sistema de denuncias Leykarin"

# ========================================
# CLAVE ÚNICA (SI SE USA)
# ========================================
CLAVEUNICA_CLIENT_ID=
CLAVEUNICA_CLIENT_SECRET=
CLAVEUNICA_REDIRECT_URI=http://localhost:8000/api/v1/auth/claveunica/callback

# ========================================
# GOOGLE OAUTH
# ========================================
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_ALLOWED_DOMAIN=municipalidadarica.cl
GOOGLE_OAUTH_ENABLED=true
GOOGLE_OAUTH_AUTO_REGISTER=false

# ========================================
# GOOGLE RECAPTCHA v3
# ========================================
RECAPTCHA_SITE_KEY=6Le48cwrAAAAABedSDcI682mOcNawqjCKT6BNGr9
RECAPTCHA_SECRET_KEY=
RECAPTCHA_ENABLED=true
RECAPTCHA_MIN_SCORE=0.5
RECAPTCHA_TIMEOUT=10

# ========================================
# FRONTEND URL
# ========================================
FRONTEND_URL=http://localhost:4200

# ========================================
# SEGURIDAD - COOKIES Y SESIONES
# ========================================
SESSION_SECURE_COOKIE=false
SESSION_SAME_SITE=lax
SESSION_DOMAIN=localhost

SANCTUM_STATEFUL_DOMAINS=localhost:4200,127.0.0.1:4200

CORS_ALLOWED_ORIGINS=http://localhost:4200

# ========================================
# RATE LIMITING
# ========================================
RATE_LIMIT_LOGIN=5,1
RATE_LIMIT_RESET_PASSWORD=3,1
RATE_LIMIT_LOGOUT=10,1
RATE_LIMIT_API=60,1
RATE_LIMIT_COMPLAINT_SUBMISSION=5,60
RATE_LIMIT_PDF_DOWNLOAD=10,1
RATE_LIMIT_RESEND_RECEIPT=3,1

# ========================================
# LOGGING DE SEGURIDAD
# ========================================
SECURITY_LOG_CHANNEL=security
SECURITY_LOG_LEVEL=warning
SECURITY_MONITORING_ENABLED=true
SECURITY_ALERT_EMAIL=noreply@municipalidadarica.cl

FILE_UPLOAD_LOG_CHANNEL=file_uploads
FILE_UPLOAD_LOG_LEVEL=info

AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90

# ========================================
# VALIDACIÓN DE ARCHIVOS
# ========================================
MAX_FILE_SIZE_PDF=20480
MAX_FILE_SIZE_IMAGE=5120
MAX_FILE_SIZE_DOCUMENT=10240

ALLOWED_FILE_EXTENSIONS_PDF=pdf
ALLOWED_FILE_EXTENSIONS_IMAGE=jpg,jpeg,png,gif
ALLOWED_FILE_EXTENSIONS_DOCUMENT=doc,docx,pdf

# ========================================
# CACHE
# ========================================
CACHE_ROLES_TTL=3600
CACHE_PERMISSIONS_TTL=3600

# ========================================
# QUEUES
# ========================================
QUEUE_MAIL_CONNECTION=database
QUEUE_MAIL_TABLE=jobs

# ========================================
# STORAGE
# ========================================
FILESYSTEM_DISK_PUBLIC=public
FILESYSTEM_DISK_PRIVATE=local

STORAGE_PATH_DECRETOS=decretos
STORAGE_PATH_VERIFICATIONS=verifications
STORAGE_PATH_TEMPLATES=templates

# ========================================
# SWAGGER/API DOCS
# ========================================
L5_SWAGGER_GENERATE_ALWAYS=true
L5_SWAGGER_UI_DOC_EXPANSION=list
L5_SWAGGER_UI_OPERATIONS_SORTER=alpha

# ========================================
# DESARROLLO
# ========================================
DEVELOPMENT_MODE=false
DEBUG_BAR_ENABLED=false
TESTING_MODE=false
MOCK_EXTERNAL_SERVICES=true

# ========================================
# SEGURIDAD AVANZADA (OPCIONAL)
# ========================================
# Configuraciones para alcanzar 10/10 en seguridad

# IPs confiables (proxies, VPN corporativa)
TRUSTED_IPS=

# Permitir cambio de IP en la misma subred
ALLOW_SAME_SUBNET=true

# Emails para alertas de seguridad
SECURITY_ALERT_EMAILS=

# Webhook de Slack para alertas
SECURITY_SLACK_WEBHOOK=

# Auditoría de seguridad
SECURITY_AUDIT_ENABLED=false
